webpackJsonp([31],{"U/CT":function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=r("Dd8w"),a=r.n(t),o=r("ZnZc"),i=r.n(o),d=r("NTtZ"),s=r("qqiS"),c=r("VKKs"),u={name:"",components:{FcForm:d.a,FcLoading:s.a},data:function(){return{formList:[],formData:{workOrderType:this.$route.params.type},userData:c.e.getUserData(),type:this.$route.params.type,title:"添加工单",componentType:1,loaded:!1}},created:function(){this.getOrderType(this.type)},computed:{orderType:function(){return this.formData.workOrderType}},watch:{orderType:function(n,e){var r=this.orderType;this.getOrderType(r),this.formData={workOrderType:r},this.$refs.FcForm.resetForm()}},mounted:function(){},methods:{getOrderType:function(n){var e=this,r=this.componentType,t=this.userData;console.log(t);t.enterpriseId;var a={enterpriseId:"10006",type:n,componentType:r};this.loaded=!0,this.$axios({url:"/work-order/get-order-type",data:a}).then(function(n){var r=n.code,t=n.data;if(200===r){var a=t.list;e.formList=e.generateFormList(a),console.log("----getOrderType----",e.formList)}e.loaded=!1}).catch(function(n){e.loaded=!1,console.error(n)})},generateFormList:function(n){var e=this;if(n){var r=n.filter(function(n){return"submit"!==n.id}).sort(function(n,e){return n.order-e.order});return r.forEach(function(n){var r=n.type,t=n.id,o=n.options,i=n.inputType;n.label=n.name,n.key=t,n.type=r.toLowerCase(),"select"===n.type&&(Array.isArray(o)&&o.map(function(n){n.text=n.name}),n.multiple&&(n.type="multipleSelect")),i&&(n.inputType=i.toLowerCase(),"textarea"===n.inputType&&(n.type="textarea")),"completeTime"===t&&(n.type="dateTimePicker"),"productLine"===t&&o.length>0&&(e.formData=a()({},e.formData,{productLine:o[0].value}))}),r}},handleSubmit:function(){var n=this;this.$refs.FcForm.validateForm().then(function(e){var r=e.completeTime,t=e.assignStaff,o=[];r&&(e.completeTime=i()(e.completeTime).format("YYYY-MM-DD HH:mm:ss")),t&&(o=t.map(function(n){return{id:n}})),n.loaded=!0;var d=n.userData;n.$axios({url:"/work-order/save",data:a()({},e,{assignerId:d.userId,assignerName:d.name,assignStaff:o})}).then(function(e){200===e.code&&(n.$toast("提交成功"),setTimeout(function(){n.$router.back(-1)},500)),n.loaded=!1}).catch(function(e){n.loaded=!1,console.error(e)})})}}},m=function(){var n=this,e=n.$createElement,r=n._self._c||e;return r("FcPage",{attrs:{title:n.title}},[r("div",{staticClass:"addAgricultural"},[r("div",{staticClass:"addAgricultural-content"},[r("div",{staticClass:"addAgricultural-form"},[r("FcForm",{ref:"FcForm",attrs:{renderList:n.formList},model:{value:n.formData,callback:function(e){n.formData=e},expression:"formData"}})],1)]),n._v(" "),r("div",{staticClass:"submit"},[r("div",{staticClass:"submit-submit bgColor white",on:{click:n.handleSubmit}},[n._v("提交")])])]),n._v(" "),r("FcLoading",{attrs:{isShow:n.loaded}})],1)};m._withStripped=!0;var l={render:m,staticRenderFns:[]},p=l;var f=!1;var A=r("VU/8")(u,p,!1,function(n){f||r("u9TZ")},"data-v-4d1def7c",null);A.options.__file="src/pages/enterprise/app/workOrderManage/add.vue";e.default=A.exports},tGEI:function(n,e,r){(n.exports=r("FZ+f")(!0)).push([n.i,"\n.addAgricultural[data-v-4d1def7c]{position:relative;min-height:100%;padding-top:0.2rem;background-color:#f7f8fa\n}\n.addAgricultural[data-v-4d1def7c] .form .formItem:last-child>div{border-color:#eeeeee\n}\n.addAgricultural[data-v-4d1def7c] .textarea{border:none;padding-bottom:0\n}\n.addAgricultural-content[data-v-4d1def7c]{background-color:#fff;padding-bottom:1.5rem\n}\n.submit[data-v-4d1def7c]{position:fixed;bottom:1rem;width:100%\n}\n.submit>div[data-v-4d1def7c]{background:#3d71f6;margin:0 0.32rem;height:0.96rem;border-radius:0.04rem;border-width:1px;line-height:0.96rem;color:#e1e1e1;text-align:center\n}\n","",{version:3,sources:["D:/FuChuang/xicha-webapp/src/pages/enterprise/app/workOrderManage/D:/FuChuang/xicha-webapp/src/pages/enterprise/app/workOrderManage/add.vue"],names:[],mappings:";AAmLA,kCACI,kBACA,gBACA,mBACA,wBAAyB;CAJ7B;AAAA,iEAOQ,oBAAqB;CAP7B;AAAA,4CAWQ,YACA,gBAAiB;CACpB;AAAA,0CAID,sBACA,qBAAsB;CACzB;AAAA,yBAEG,eACA,YACA,UAAW;CAHf;AAAA,6BAKQ,mBACA,iBACA,eACA,sBACA,iBACA,oBACA,cACA,iBAAkB;CACrB",file:"add.vue",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.addAgricultural {\r\n    position: relative;\r\n    min-height: 100%;\r\n    padding-top: 0.2rem;\r\n    background-color: #f7f8fa;\r\n\r\n    /deep/ .form .formItem:last-child > div {\r\n        border-color: #eeeeee;\r\n    }\r\n\r\n    /deep/ .textarea {\r\n        border: none;\r\n        padding-bottom: 0;\r\n    }\r\n}\r\n\r\n.addAgricultural-content {\r\n    background-color: #fff;\r\n    padding-bottom: 1.5rem;\r\n}\r\n.submit {\r\n    position: fixed;\r\n    bottom: 1rem;\r\n    width: 100%;\r\n    > div {\r\n        background: #3d71f6;\r\n        margin: 0 0.32rem;\r\n        height: 0.96rem;\r\n        border-radius: 0.04rem;\r\n        border-width: 1px;\r\n        line-height: 0.96rem;\r\n        color: #e1e1e1;\r\n        text-align: center;\r\n    }\r\n}\r\n"],sourceRoot:""}])},u9TZ:function(n,e,r){var t=r("tGEI");"string"==typeof t&&(t=[[n.i,t,""]]),t.locals&&(n.exports=t.locals);r("rjj0")("66fe9fca",t,!1,{})}});
//# sourceMappingURL=31.d569f084f41f68500ecc.js.map