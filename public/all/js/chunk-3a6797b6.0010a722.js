(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3a6797b6"],{"21d3":function(t,e,a){},"2a79":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home-msg"},[e("div",{staticClass:"home-msg-phone"},[e("div",{staticClass:"home-msg-cont"},[t._l(t.template.items,(function(a,i){return e("div",{directives:[{name:"show",rawName:"v-show",value:a.visible&&"backMusic"!==a.type,expression:"item.visible && item.type !== 'backMusic'"}],key:a.id,staticClass:"child-elements",staticStyle:{position:"relative"},style:{border:a.id===t.shineId?"1px dashed #6074B6":""},attrs:{draggable:!0,id:"homeMsg-".concat(a.id)},on:{dragstart:function(e){return e.target!==e.currentTarget?null:t.dragstartEvent(a,i)},dragend:function(e){return e.target!==e.currentTarget?null:t.dragendEvent.apply(null,arguments)},dragenter:function(e){return e.target!==e.currentTarget?null:t.dragenterEvent.apply(null,arguments)},dragleave:function(e){return e.target!==e.currentTarget?null:t.dragleaveEvent.apply(null,arguments)},dragover:function(e){return e.target!==e.currentTarget?null:t.dragoverEvent.apply(null,arguments)},click:function(e){return e.stopPropagation(),t.selectClick(a)}}},["backMusic"!==a.type?e("div",{directives:[{name:"show",rawName:"v-show",value:a.id===t.shineId,expression:"item.id === shineId ? true : false"}],staticClass:"click-btn"},[t.CONFIG[a.type].isShowEdit?e("div",{staticClass:"edit-btn",staticStyle:{"border-right":"1px solid white"},on:{click:function(e){return e.stopPropagation(),t.selectItem2(a,i)}}},[t._v(" 编辑 ")]):t._e(),t.CONFIG[a.type].must?t._e():e("div",{staticClass:"edit-btn",staticStyle:{cursor:"pointer",color:"'white'"},on:{click:function(e){return e.stopPropagation(),t.remove(a)}}},[t._v(" 删除 ")])]):t._e(),"templateHead"===a.type?e("template-head",{attrs:{item:{value:{icon:a.value.icon,title:a.value.title||"请在配置中输入标题",bgcolor:a.value.bgcolor}}}}):t._e(),"carousel"===a.type?e("template-carousel",{attrs:{item:a}}):t._e(),"productIntroduction"===a.type?e("product-desc",{attrs:{product:t.product}}):t._e(),"relatedProduct"===a.type?e("related-product",{attrs:{list:t.relatedProduct}}):t._e(),"antiCounterfeit"===a.type?e("validate-search-edit",{attrs:{productName:t.product.productName,tenant:{name:"测试企业"},item:a}}):t._e(),"text"===a.type?e("template-text",{attrs:{item:a}}):t._e(),"video"===a.type?e("template-video",{attrs:{item:a}}):t._e(),"pictures"===a.type?e("template-pictures",{attrs:{item:a}}):t._e(),"productInfo"===a.type?e("product-info",{attrs:{item:a,sourceFlag:t.sourceFlag,code:t.code,codeAttrs:t.productAttrs,batch:t.CONFIG.productInfo.sampleData.batch}}):t._e(),"stylebox"===a.type?e("template-stylebox",{attrs:{item:a}}):t._e(),"codeInformation"===a.type?e("code-information",{attrs:{item:a,code:t.CONFIG.codeInformation.sampleData.code}}):t._e(),"productBarcode"===a.type?e("product-barcode",{attrs:{item:a,code:{barCode:t.product.barCode}}}):t._e(),"productImages"===a.type?e("product-images",{attrs:{item:a,images:t.productImages}}):t._e(),"productPrice"===a.type?e("product-price",{attrs:{item:a,code:{price:t.price}}}):t._e(),"productQualityGuaranteePeriod"===a.type?e("product-quality-guarantee-period",{attrs:{item:a,code:t.CONFIG.productQualityGuaranteePeriod.sampleData.code,batch:t.CONFIG.productQualityGuaranteePeriod.sampleData.batch}}):t._e()],1)})),e("div",{directives:[{name:"show",rawName:"v-show",value:t.template.config.showBottom,expression:"template.config.showBottom"}],staticStyle:{height:"60px"}})],2)]),e("div",{staticClass:"home-msg-float",on:{click:function(e){return e.stopPropagation(),t.musicClick(t.musicComp)}}},[t.musicComp?e("base-music",{directives:[{name:"show",rawName:"v-show",value:t.musicComp.visible,expression:"musicComp.visible"}],staticStyle:{float:"right",height:"40px",width:"40px","margin-bottom":"10px","margin-right":"10px"},attrs:{item:{value:{music:t.musicComp.value.music,bgcolor:t.musicComp.value.bgcolor}}}}):t._e(),e("bottom-navigator",{directives:[{name:"show",rawName:"v-show",value:t.template.config.showBottom,expression:"template.config.showBottom"}],staticStyle:{"border-radius":"0 0 15px 15px"},attrs:{active:"home",code:{}}})],1)])},r=[],o=a("40bd"),s=a("7e8c"),c=(a("6166"),a("96c5"),a("8bda"),a("9dcb"),a("e626"),a("ed70"),a("6864")),n=a("9df1"),l=a("e05f"),u=function(){var t=this,e=t._self._c;return e("div",{staticClass:"f14"},[e("div",{directives:[{name:"show",rawName:"v-show",value:"query"===t.stage,expression:"stage === 'query'"}],staticClass:"validate-edit"},[t._m(0),e("el-form",{ref:"form",staticClass:"flex-all-center",staticStyle:{"margin-top":"16px"}},[e("el-form-item",{attrs:{"label-width":"0"}},[e("el-input",{staticClass:"vc-input flex-1",attrs:{placeholder:"请输入防伪码查询"},on:{click:function(){}}},[e("template",{slot:"append"},[e("el-button",{staticClass:"vs-btn c-white",style:{"background-color":t.item.value.buttonColor,color:t.item.value.buttonTextColor}},[t._v(t._s(t.item.value.buttonText))])],1)],2)],1)],1)],1),e("div",{directives:[{name:"show",rawName:"v-show",value:"success"==t.stage,expression:"stage == 'success'"}],staticClass:"query-result"},[e("p",{staticStyle:{"font-weight":"bold",color:"#38bf4d","margin-top":"20px"}},[t._v(" "+t._s(t.item.value.validTitle)+" ")]),e("p",{staticStyle:{"font-weight":"bold","font-size":"18px",margin:"20px 0 20px 0"}},[t._v(t._s(t.productName))]),e("p",{staticClass:"result-text"},[t._v(t._s(t.successText))]),e("div",{staticStyle:{width:"100%","text-align":"right",position:"relative",top:"-80px",right:"15px",height:"20px"}},[e("img",{staticStyle:{width:"100px"},attrs:{src:a("f562")}})])]),e("div",{directives:[{name:"show",rawName:"v-show",value:"failure"===t.stage,expression:"stage === 'failure'"}],staticClass:"query-result"},[e("div",[e("p",{staticStyle:{"font-weight":"bold",color:"#fb0000","margin-top":"20px"}},[t._v(" "+t._s(t.item.value.invalidTitle)+" ")]),e("p",{staticStyle:{"font-weight":"bold","font-size":"18px",margin:"20px 0 20px 0"}},[t._v(t._s(t.productName))]),e("p",{staticClass:"result-text"},[t._v(t._s(t.failureText))])]),t.item.value.queryHistory?e("router-link",{staticStyle:{"margin-top":"20px","text-decoration":"none",color:"gray"},attrs:{to:"/check-code-history?idisCode=".concat(encodeURIComponent(t.idisCode))}},[t._v(" 点击查看最近10条记录 ")]):t._e()],1),e("audio",{ref:"audio"})])},d=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"public-title"},[e("div",[t._v("验证查询")]),e("img",{attrs:{src:a("ec99"),alt:""}})])}],p=(a("430a"),a("eb5c"),a("48d4"),a("fa30")),m={props:{item:Object,idisCode:String,productName:String,tenant:Object},data:function(){return{stage:"query",successText:"",failureText:"",voiceText:""}},watch:{"item.value.configArea":function(t){t&&(this.stage=t)},"item.value.successTemplate":{handler:function(){var t=Object(s["a"])(Object(o["a"])().mark((function t(e){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.successText=this.replaceText("您所查询的产品是正品!");case 1:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),immediate:!0},"item.value.failureTemplate":{handler:function(){var t=Object(s["a"])(Object(o["a"])().mark((function t(e){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.failureText=this.replaceText("您所查询的产品已被多次查询!");case 1:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),immediate:!0}},methods:{replaceText:function(t){return t=t.replace(/\{count\}/g,1),t=t.replace(/\{product\}/g,this.productName),t=t.replace(/\{firstQueryTime\}/g,"2020-01-01"),t=t.replace(/\{lastQueryTime\}/g,"2020-01-01"),t=t.replace(/\{company\}/g,this.tenant.name),t=t.replace(/\{code\}/g,"<测试idis 码>"),t=t.replace(/\{validateCode\}/g,"123456"),t}}},f=m,h=(a("81ca"),a("e607")),v=Object(h["a"])(f,u,d,!1,null,"7a97620a",null),g=v.exports,b=a("1ad9"),y=a("f2af"),w=a("a622"),x=a("7f59"),C=a("33d3"),I=a("e5a7"),k=a("467e"),T=a("0268"),_=a("b3fd"),N=a("520a"),F=a("dc2d"),O=a("cb47"),S=a("8f5e"),E=a("3eae"),P=a("9d64"),j={props:{template:Object,sourceFlag:Number|String},data:function(){var t={productName:"(请选择对象)",remark:"(请选择对象)",barCode:"1234567890"},e={productName:"(请选择对象)",productNo:"(请选择对象)",barCode:"(请选择对象)",categoryName:"(请选择对象)"};return{defaultIcon:P,shineId:0,CONFIG:O["a"],defaultProduct:t,product:t,productImages:[],productAttrs:[],defaultCode:e,code:e,price:"",relatedProduct:[]}},computed:{musicComp:function(){var t=this.template.items.filter((function(t){return"backMusic"===t.type}));return 0==t.length?null:t[0]}},watch:{"template.productId":{handler:function(){var t=Object(s["a"])(Object(o["a"])().mark((function t(){var e,a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.template.productId,e){t.next=7;break}return this.product=this.defaultProduct,this.code=this.defaultCode,this.productImages=[],this.productAttrs=[],t.abrupt("return");case 7:return t.next=9,Object(p["b"])("/businessObject/detail?id=".concat(e));case 9:a=t.sent,this.product=a,this.$emit("changeSourceFlag",a.sourceFlag),this.productImages=a.businessObjectImgBOList.map((function(t){return t.imgPath})),this.productAttrs=a.businessObjectAttrBOList,this.code={productName:a.productName,categoryName:a.categoryName};case 15:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),immediate:!0},"template.id":{handler:function(){var t=Object(s["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.template.id){t.next=3;break}return this.relatedProduct=[],t.abrupt("return");case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},methods:{selectClick:function(t){this.shineId=t.id},selectItem2:function(t,e){this.shineId=t.id,this.$emit("selectItem2",{item:t,k:e})},musicClick:function(t){this.$emit("selectItem2",{item:t})},remove:function(t){var e=this;this.$confirm("确定要删除该组件吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",closeOnClickModal:!1,type:"warning"}).then(Object(s["a"])(Object(o["a"])().mark((function a(){return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.$emit("removeItem",t);case 1:case"end":return a.stop()}}),a)})))).catch((function(){}))},dragstartEvent:function(t,e){var a=this;a.shineId=t.id,a.$emit("selectItem2",{item:t,k:e}),a.$store.commit("setDragElement",event.currentTarget)},dragendEvent:function(t){t.preventDefault()},dragenterEvent:function(t){var e=this;if(e.$store.state.dragElement!=t.target){t.target.parentNode.insertBefore(e.$store.state.dragElement,t.target);for(var a=t.target.parentNode.children,i=[],r=0;r<a.length;r++){var o=a[r].id.slice(8);i.push(o)}for(var s=e.template.items,c=[],n=0;n<i.length;n++)for(var l=0;l<s.length;l++)s[l].id==i[n]&&c.push(s[l]);e.template.items=c}},dragleaveEvent:function(t){var e=this;if(e.$store.state.dragElement!=t.target)if(!e.lock||t.target!=t.target.parentNode.lastElementChild&&t.target!=t.target.parentNode.lastChild)e.lock=!0;else{t.target.parentNode.appendChild(e.$store.state.dragElement),e.lock=!1;for(var a=t.target.parentNode.children,i=[],r=0;r<a.length;r++){var o=a[r].id.slice(8);i.push(o)}for(var s=e.template.items,c=[],n=0;n<i.length;n++)for(var l=0;l<s.length;l++)s[l].id==i[n]&&c.push(s[l]);e.template.items=c}},dragoverEvent:function(t){t.preventDefault()},selectItem:function(t){this.shineId=t,document.getElementById("homeMsg-"+t).scrollIntoView()}},mounted:function(){},components:{RelatedProduct:c["a"],ProductDesc:n["a"],ProductInfo:l["a"],ValidateSearchEdit:g,TemplatePictures:b["a"],TemplateVideo:y["a"],TemplateStylebox:w["a"],TemplateHead:C["a"],TemplateText:x["a"],TemplateCarousel:I["a"],CodeInformation:k["a"],ProductImages:T["a"],ProductPrice:N["a"],ProductQualityGuaranteePeriod:F["a"],ProductBarcode:_["a"],BaseMusic:S["a"],BottomNavigator:E["a"]}},D=j,B=(a("b176"),Object(h["a"])(D,i,r,!1,null,"25794287",null));e["a"]=B.exports},"81ca":function(t,e,a){"use strict";a("21d3")},"9ef6":function(t,e,a){},b176:function(t,e,a){"use strict";a("9ef6")},cb47:function(t,e,a){"use strict";var i=a("7a52"),r=(a("430a"),a("396b"),a("bdff"),a("dd09")),o=new Date;e["a"]={templateHead:{title:"标题栏",type:"templateHead",defaultValue:{title:"",icon:"",bgcolor:"#FFFFFF"},must:!1,isShowEdit:!0,limit:1,validate:function(t){if(!t.value.title)return"请输入标题"}},backMusic:{title:"背景音乐",type:"backMusic",defaultValue:{music:"",bgcolor:"#004da1"},must:!1,isShowEdit:!0,limit:1,validate:function(t){if(!t.value.music)return"请上传背景音乐"}},carousel:{title:"轮播图",type:"carousel",defaultValue:{height:"200px",images:[]},must:!1,isShowEdit:!0,limit:1,validate:function(t){return t.value.images.length?null==t.value.url||""==t.value.url||t.value.url.match(/^https?:\/\/([^.]+\.)+[^.]+$/)?void 0:"自定义的链接需要填写带http:// 或者https:// 的有效连接":"请选择轮播图图片"}},antiCounterfeit:{title:"验证查询",tooltip:"防伪/防窜验证, 防伪码在生码明细的码详情中查看",type:"antiCounterfeit",defaultValue:{configArea:"query",buttonColor:"#185EF0",buttonText:"码上验证",buttonTextColor:"#ffffff",successTemplate:1,failureTemplate:2,invalidTitle:"暂无该产品相关信息",queryHistory:!0,validTitle:"您所查询的产品是正品!",validateText:""},sampleData:{},must:!1,limit:1},text:{title:"文本",type:"text",defaultValue:{text:"",style:""},must:!1,isShowEdit:!0,limit:10,validate:function(t){if(!t.value.text)return"请输入文本"}},video:{title:"视频",type:"video",defaultValue:{src:""},must:!1,isShowEdit:!0,limit:4,validate:function(t){if(!t.value.src)return"请上传视频"}},pictures:{title:"图片",type:"pictures",defaultValue:{images:[],link:""},must:!1,isShowEdit:!0,limit:10,validate:function(t){if(0==t.value.images.length)return"请至少上传1 张图片";var e=t.value.link;return e&&!e.match(/^https?:\/\/([^.]+\.)+[^.]+$/)?"自定义的链接需要填写带http:// 或者https:// 的有效连接":void 0}},productInfo:{title:"对象信息",type:"productInfo",sampleData:{},must:!1,isShowEdit:!0,limit:1,defaultValue:{}},stylebox:{title:"宫格",type:"stylebox",must:!1,isShowEdit:!0,limit:4,defaultValue:{rows:[[{size:1,title:"标题",linkType:"none",href:"",fonticon:"",imgIcon:"https://ztl-admin-gongyema-com.obs.cn-east-2.myhuaweicloud.com/image-bz/202206/1534402386989289472.png",forecolor:"#000000",titleAlign:"center",backcolor:"#FFFFFF"},{size:1,title:"标题",linkType:"none",href:"",fonticon:"",imgIcon:"https://ztl-admin-gongyema-com.obs.cn-east-2.myhuaweicloud.com/image-bz/202206/1534402386989289472.png",forecolor:"#000000",titleAlign:"center",backcolor:"#FFFFFF"},{size:1,title:"标题",linkType:"none",href:"",fonticon:"",imgIcon:"https://ztl-admin-gongyema-com.obs.cn-east-2.myhuaweicloud.com/image-bz/202206/1534402386989289472.png",forecolor:"#000000",titleAlign:"center",backcolor:"#FFFFFF"}]]},validate:function(t){var e,a=t.value.rows[0],r=Object(i["a"])(a);try{for(r.s();!(e=r.n()).done;){var o=e.value;if("normal"===o.linkType){if(!o.href||!o.href.match(/^https?:\/\/([^.]+\.)+[^.]+$/))return"自定义的链接需要填写带http:// 或者https:// 的有效连接"}else if("qrCodeScan"===o.linkType){if(!o.qrCodeImage)return"关注微信链接需要上传二维码"}else if("kefuMobile"===o.linkType){if(!o.kefuMobile)return"请填写电话号码"}else if("weixinWeapp"===o.linkType&&(void 0===o.weixinWeappPath||""===o.weixinWeappPath||void 0===o.weixinWeappUserName||""===o.weixinWeappUserName))return"如果选择微信小程序，小程序原始id 和 链接网址 为必填项!"}}catch(s){r.e(s)}finally{r.f()}}},productQualityGuaranteePeriod:{title:"保质期",type:"productQualityGuaranteePeriod",defaultValue:{},sampleData:{batch:{productionDate:"2020-01-01",beyondShelfLifeDate:Object(r["a"])(o,"yyyy-MM-dd")}},limit:1,must:!1,isShowEdit:!1},productImages:{title:"对象图片",type:"productImages",defaultValue:{},sampleData:{},limit:1,must:!1,isShowEdit:!1},codeInformation:{title:"标识码",type:"codeInformation",defaultValue:{},sampleData:{code:{idisCode:"88.118.8/KIT001"}},limit:1,must:!1,isShowEdit:!1}}}}]);
//# sourceMappingURL=chunk-3a6797b6.0010a722.js.map