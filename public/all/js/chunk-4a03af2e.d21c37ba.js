(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4a03af2e"],{"0cf5":function(e,t,i){"use strict";i("6f80")},"0e38":function(e,t,i){},1642:function(e,t,i){"use strict";i("497c")},"22f9":function(e,t,i){},2942:function(e,t,i){"use strict";i("22f9")},3379:function(e,t,i){"use strict";i("ba2d")},"3a7f":function(e,t,i){"use strict";i("e03c")},"41ca":function(e,t,i){"use strict";i("ce16")},"43e4":function(e,t,i){"use strict";i("a85e")},"497c":function(e,t,i){},5102:function(e,t,i){"use strict";i.r(t);i("48d4");var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex-v-center view-full"},[t("div",{staticClass:"setting-sort"},[t("div",{staticClass:"home-base-setting"},[t("p",{staticClass:"home-base-setting-title"},[e._v("基本信息")]),t("el-form",{ref:"validateForm",attrs:{model:e.template,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"模板名称",prop:"name",rules:[{required:!0,message:"名称不能为空"}]}},[t("el-input",{attrs:{type:"text",size:"small",placeholder:"请输入模板名称",autocomplete:"off",maxlength:"15","show-word-limit":""},model:{value:e.template.name,callback:function(t){e.$set(e.template,"name",t)},expression:"template.name"}})],1),t("el-form-item",{attrs:{label:"绑定对象",prop:"productId",rules:[{required:!0,message:"请绑定对象信息"}]}},[t("product-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入对象名称",size:"small"},on:{getFlag:e.handleProductChange},model:{value:e.template.productId,callback:function(t){e.$set(e.template,"productId",t)},expression:"template.productId"}})],1),t("el-form-item",{staticClass:"mt20",staticStyle:{"margin-bottom":"0"}},[t("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(t){return e.submitForm("validateForm",!0)}}},[e._v("提交模板")]),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.submitForm("validateForm",!1)}}},[e._v("保存模板")])],1)],1)],1),t("home-setting",{ref:"homeSetting",attrs:{template:e.template},on:{updateItem:e.updateItem}}),t("p",{staticStyle:{"font-size":"16px","text-align":"left","padding-left":"15px","margin-bottom":"5px"}},[e._v("显示栏目")]),t("home-sort",{ref:"homeSort",attrs:{sortList:e.template.items},on:{selectItem:e.selectItem,removeItem:e.removeItem}})],1),t("home-msg",{ref:"homeMsg",attrs:{sourceFlag:e.sourceFlag,template:e.template},on:{selectItem2:e.selectItem2,selectItem:e.selectItem,removeItem:e.removeItem,changeSourceFlag:e.changeSourceFlag}}),t("home-config",{ref:"homeConfig",attrs:{sourceFlag:e.sourceFlag,sortList:e.template.items}})],1)},s=[],l=i("40bd"),o=i("7e8c"),n=i("7a52"),r=(i("4b63"),i("ed70"),i("1af9"),i("2910"),i("d404"),i("65c4"),i("5250"),i("1f37")),c=function(){var e=this,t=e._self._c;return t("div",{staticClass:"home-setting"},[t("p",{staticClass:"home-setting-title"},[e._v("配置信息")]),t("ul",{staticClass:"ml70"},[t("li",{staticClass:"home-setting-item"},[t("div",{staticClass:"flex-v-center"},[t("p",{staticClass:"home-setting-text"},[e._v("获取用户")]),t("el-switch",{attrs:{width:38},model:{value:e.template.config.getWeixinUserInfo,callback:function(t){e.$set(e.template.config,"getWeixinUserInfo",t)},expression:"template.config.getWeixinUserInfo"}})],1)]),t("li",{staticClass:"home-setting-item"},[t("div",{staticClass:"flex-v-center"},[t("p",{staticClass:"home-setting-text"},[e._v("导航栏")]),t("el-switch",{attrs:{width:38},model:{value:e.template.config.showBottom,callback:function(t){e.$set(e.template.config,"showBottom",t)},expression:"template.config.showBottom"}})],1)]),e._l(e.settingSelect,(function(i){return t("li",{key:i.id,staticClass:"home-setting-item"},[t("div",{staticClass:"flex-v-center"},[t("p",{staticClass:"home-setting-text"},[e._v(e._s(i.title))]),t("el-switch",{attrs:{"v-model":e.chooseItem.has(i.type),value:e.chooseItem.has(i.type),width:38},on:{change:function(t){return e.updateItem(i,t)}}})],1)])}))],2),t("ul",{staticClass:"ml70"},e._l(e.settingEdit,(function(i){return t("li",{key:i.id,class:["home-edit-item","flex-sb",e.chooseItem.has(i.type)?"home-edit-item-active":""],on:{click:function(t){return e.updateItem(i,!0)}}},[t("div",{staticClass:"flex-v-center"},[t("p",{staticClass:"home-setting-text ta-c",staticStyle:{"margin-right":"0",width:"100% !important"}},[t("i",{class:["icon","iconfont",e.iconStyleIcon[i.type]]}),e._v(e._s(i.title)+" ")])])])})),0)])},u=[],m=(i("08e1"),i("8bda"),i("15f2"),i("0ea2"),i("ee6e"),i("cb47")),p={props:{template:Object},name:"Home",data:function(){return{settingSelect:[],settingEdit:[],chooseItem:new Map,iconStyleIcon:{stylebox:"el-icon-s-grid",video:"el-icon-video-play",pictures:"el-icon-picture-outline",text:"el-icon-document"}}},components:{},mounted:function(){for(var e=0,t=Object.keys(m["a"]);e<t.length;e++){var i=t[e],a=m["a"][i];a.must||(1===a.limit?this.settingSelect.push(a):this.settingEdit.push(a))}},methods:{syncSettingInfo:function(e){var t=this;e.items.forEach((function(e){t.chooseItem.has(e.type)?t.chooseItem.set(e.type,t.chooseItem.get(e.type)+1):t.chooseItem.set(e.type,1)})),this.$forceUpdate()},updateItem:function(e,t){var i=void 0===t||t,a={item:e,flag:i};if(this.chooseItem.has(e.type)){if(e&&1===e.limit)return t?this.chooseItem.set(e.type,1):this.chooseItem.delete(e.type),this.$emit("updateItem",a),void this.$forceUpdate();this.chooseItem.has(e.type)&&this.chooseItem.get(e.type)<e.limit?(this.chooseItem.set(e.type,this.chooseItem.get(e.type)+1),this.$emit("updateItem",a),this.$forceUpdate()):this.$message.error("最多添加"+e.limit+"条")}else this.chooseItem.set(e.type,1),this.$emit("updateItem",a),this.$forceUpdate()},asyncItemInfo:function(e){this.chooseItem.has(e.type)?(this.chooseItem.has(e.type)&&this.chooseItem.get(e.type)>1?this.chooseItem.set(e.type,this.chooseItem.get(e.type)-1):this.chooseItem.delete(e.type),this.$forceUpdate()):this.$forceUpdate()}}},f=p,h=(i("43e4"),i("e607")),d=Object(h["a"])(f,c,u,!1,null,"5c015f0f",null),g=d.exports,v=function(){var e=this,t=e._self._c;return t("div",{staticClass:"home-sort"},[t("ul",[e._l(e.sortList,(function(i,a){return[e.CONFIG[i.type]?t("li",{key:i.id,ref:"item-".concat(i.id),refInFor:!0,class:[i.id===e.shineId?"home-sort-item-select":"home-sort-item","flex-sb"],on:{click:function(t){return e.selectItem(i,a)}}},[t("div",{staticClass:"sort-opt-group"},[e.CONFIG[i.type].must?t("i",{staticStyle:{width:"16px"}}):t("i",{staticClass:"el-icon-close",staticStyle:{cursor:"pointer"},attrs:{title:"删除"},on:{click:function(t){return t.stopPropagation(),e.remove(i)}}}),t("p",{staticClass:"home-sort-text"},[e._v(e._s(e.CONFIG[i.type].title))])]),t("div",{staticClass:"home-sort-icon"},[t("i",{directives:[{name:"show",rawName:"v-show",value:a>0,expression:"i > 0"}],staticClass:"el-icon-top",attrs:{title:"上移"},on:{click:function(t){return t.stopPropagation(),e.move("up",a,i)}}}),t("i",{directives:[{name:"show",rawName:"v-show",value:a<e.sortList.length-1,expression:"i < sortList.length - 1"}],staticClass:"el-icon-bottom",attrs:{title:"下移"},on:{click:function(t){return e.move("down",a,i)}}}),t("i",{staticClass:"el-icon-edit-outline",attrs:{title:"编辑"},on:{click:function(t){return t.stopPropagation(),e.selectItem(i,a)}}})])]):e._e()]}))],2)])},b=[],x={data:function(){return{CONFIG:m["a"],shineId:-1}},props:["sortList"],components:{},methods:{move:function(e,t){"down"===e?this.swapArr(this.sortList,t,t+1):this.swapArr(this.sortList,t,t-1)},swapArr:function(e,t,i){e[t]=e.splice(i,1,e[t])[0]},hightItem:function(e){this.shineId=e.id;var t=this.$refs["item-".concat(e.id)][0];this.$el.scrollTop=t.offsetTop},selectItem:function(e,t){this.$emit("selectItem",{item:e,i:t}),this.shineId=e.id},remove:function(e){var t=this;this.$confirm("确定要删除该组件吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",closeOnClickModal:!1,type:"warning"}).then(Object(o["a"])(Object(l["a"])().mark((function i(){return Object(l["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:t.$emit("removeItem",e);case 1:case"end":return i.stop()}}),i)}))))}}},w=x,y=(i("0cf5"),Object(h["a"])(w,v,b,!1,null,"bb69e928",null)),I=y.exports,k=i("2a79"),C=function(){var e=this,t=e._self._c;return t("div",{staticClass:"home-config"},[t("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"属性配置",name:"first"}},[t("defaultItem-Setting",{directives:[{name:"show",rawName:"v-show",value:""==e.compFlg,expression:"compFlg == ''"}]}),t("TitleItemSetting",{directives:[{name:"show",rawName:"v-show",value:"templateHead"==e.compFlg,expression:"compFlg == 'templateHead'"}],ref:"titleSetting"}),t("MusicItemSetting",{directives:[{name:"show",rawName:"v-show",value:"backMusic"==e.compFlg,expression:"compFlg == 'backMusic'"}],ref:"musicSetting"}),t("TextItemSetting",{directives:[{name:"show",rawName:"v-show",value:"text"==e.compFlg,expression:"compFlg == 'text'"}],ref:"textSetting",attrs:{item:e.sortList}}),t("imageItem-Setting",{directives:[{name:"show",rawName:"v-show",value:"pictures"===e.compFlg,expression:"compFlg === 'pictures'"}],ref:"imageSetting"}),t("VideoItemSetting",{directives:[{name:"show",rawName:"v-show",value:"video"==e.compFlg,expression:"compFlg == 'video'"}],ref:"videoSetting"}),t("CarouselItemSetting",{directives:[{name:"show",rawName:"v-show",value:"carousel"==e.compFlg,expression:"compFlg == 'carousel'"}],ref:"carouselSetting"}),t("StyleboxItemSetting",{directives:[{name:"show",rawName:"v-show",value:"stylebox"==e.compFlg,expression:"compFlg == 'stylebox'"}],ref:"styleboxSetting"}),t("ProductInfoSetting",{directives:[{name:"show",rawName:"v-show",value:"productInfo"===e.compFlg,expression:"compFlg === 'productInfo'"}],attrs:{item:e.item,sourceFlag:e.sourceFlag}}),t("ValidateSetting",{directives:[{name:"show",rawName:"v-show",value:"antiCounterfeit"===e.compFlg,expression:"compFlg === 'antiCounterfeit'"}],attrs:{item:e.item}})],1)],1)],1)},S=[],F=(i("6166"),function(){var e=this,t=e._self._c;return t("el-alert",{attrs:{title:"没有组件属性需设置",type:"warning",closable:!1}})}),_=[],$={data:function(){return{}},methods:{}},T=$,A=Object(h["a"])(T,F,_,!1,null,null,null),j=A.exports,N=(i("bdff"),function(){var e=this,t=e._self._c;return t("el-form",{ref:"form",attrs:{model:e.item.value,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"链接",prop:"link"}},[t("el-input",{attrs:{placeholder:"(以http/https 开头)",size:"small"},model:{value:e.item.value.link,callback:function(t){e.$set(e.item.value,"link",t)},expression:"item.value.link"}}),t("div",{staticStyle:{"font-size":"12px",color:"#C0C0C0","line-height":"20px","text-align":"left"}},[e._v(" 可在连接中使用参数 {productName} (对象名) 或 {batchNo} (批次编号), {code} (标识), 比如 https://www.baidu.com/s?wd={productName} ")])],1),t("el-form-item",{attrs:{label:"图片"}},[t("el-upload",{staticClass:"upload-carouse",attrs:{action:e.uploadUrl,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"on-success":e.handleSuccess,"on-exceed":e.handleExceed,"file-list":e.fileList,limit:10,accept:"image/jpeg,image/gif,image/png,image/jpg","list-type":"picture",multiple:!0}},[t("el-button",{attrs:{size:"mini",type:"primary"}},[e._v("点击上传")]),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t("el-alert",{staticStyle:{padding:"0 0 0 5px"},attrs:{title:"只能上传jpg/jpeg/png/gif格式文件",type:"info","show-icon":"",closable:!1}})],1)],1)],1)],1)}),O=[],z=i("61da"),L={data:function(){return{uploadUrl:"https://xi.cn88555.com/api/base/upload-file",fileList:[],images:[],item:{value:{}}}},methods:{asyncImageInfo:function(e){var t=this;this.item=e,this.fileList=[],this.images=[],e.value.images.forEach((function(e){t.fileList.push({url:e,name:""}),t.images.push(e)}))},handleRemove:function(e,t){this.item.value.images.splice(this.item.value.images.findIndex((function(t){return t===e.url})),1),this.images.splice(this.images.findIndex((function(t){return t.url===e.url})),1),this.fileList=t},handlePreview:function(e){console.log(e)},handleSuccess:function(e){!e||200!==e.code&&0!==e.code?this.$message.error("图片上传失败，请重试！"):(this.images.push(e.data),this.item.value.images.push(e.data))},handleExceed:function(){z["a"].$emit("showMessage",{message:"最多上传10张图片"})}}},U=L,H=(i("3a7f"),Object(h["a"])(U,N,O,!1,null,"5b49fcb4",null)),M=H.exports,P=function(){var e=this,t=e._self._c;return t("el-form",{ref:"form",staticStyle:{height:"100%"},attrs:{model:e.item.value,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"视频地址",error:e.errorMsg}},[t("el-input",{staticClass:"videoItemSetting-input",attrs:{type:"textarea",placeholder:"将视频iframe 代码粘贴至此",rows:3},on:{input:e.setInputValue},model:{value:e.item.value.iframeCode,callback:function(t){e.$set(e.item.value,"iframeCode",t)},expression:"item.value.iframeCode"}})],1),t("div",{ref:"helpPanel"},[t("div",{staticStyle:{"text-align":"left",position:"absolute",bottom:"0",width:"100%"}},[t("el-button",{staticStyle:{width:"100%","margin-bottom":"10px"},on:{click:e.triggerHelpPanel}},[e._v(e._s(e.helpVisible?"▽ 收起帮助":"△ 帮助信息"))]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.helpVisible,expression:"helpVisible"}]},[t("h3",[t("b",[e._v("腾讯视频")])]),t("p",[e._v("复制腾讯视频中的如下代码并粘贴到视频地址文本框中.")]),t("img",{attrs:{src:e.insImage}})])],1)])],1)},V=[],B=(i("430a"),i("396b"),i("ff07")),q=i.n(B),G={data:function(){return{errorMsg:"",helpVisible:!1,uploadUrl:"https://xi.cn88555.com/api/base/upload-file",fileList:[],item:{value:{iframeCode:""}},insImage:q.a}},methods:{asyncVideoInfo:function(e){this.item=e},handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},setInputValue:function(){var e=this.item.value.iframeCode,t=(e||"").match(/src="([^"]+)"/);t&&t[0]?(this.errorMsg="",this.item.value.src=t[1]):this.errorMsg="没有检测到视频地址"},triggerHelpPanel:function(){this.helpVisible=!this.helpVisible}},mounted:function(){this.$refs.helpPanel.style.height=window.innerHeight-191+"px"}},J=G,R=(i("dae8"),Object(h["a"])(J,P,V,!1,null,"6f1c6c56",null)),W=R.exports,E=function(){var e=this,t=e._self._c;return t("div",{staticClass:"styleboxSetting",staticStyle:{"text-align":"left"}},[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-position":"left","label-width":"80px"}},[t("el-radio-group",{attrs:{size:"small"},model:{value:e.formStyle,callback:function(t){e.formStyle=t},expression:"formStyle"}},e._l(4,(function(i){return t("el-radio-button",{key:i,attrs:{label:i}},[e._v("样式"+e._s(i))])})),1),e._l(e.row,(function(i,a){return t("div",{key:a},[t("h3",{staticClass:"form-title"},[e._v(" 栏目"+e._s(a+1)+" "),t("span",{staticStyle:{"font-size":"12px",float:"right"}},[e._v("尺寸:"+e._s(i.size))])]),t("el-form-item",{attrs:{label:"标题",prop:"title".concat(a)}},[t("el-input",{attrs:{size:"small"},model:{value:i.title,callback:function(t){e.$set(i,"title",t)},expression:"box.title"}})],1),t("el-form-item",{attrs:{label:"链接"}},[t("div",[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",size:"small"},on:{change:function(t){return e.onLinkChange(t,i)}},model:{value:i.linkType,callback:function(t){e.$set(i,"linkType",t)},expression:"box.linkType"}},e._l(e.linkTypes,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),t("div",{directives:[{name:"show",rawName:"v-show",value:"normal"===i.linkType,expression:"box.linkType === 'normal'"}]},[t("el-input",{attrs:{size:"small",placeholder:"请输入自定义链接"},model:{value:i.href,callback:function(t){e.$set(i,"href",t)},expression:"box.href"}}),t("div",{staticStyle:{"font-size":"12px",color:"#C0C0C0","line-height":"20px"}},[e._v(" 可在连接中使用参数 {productName} (对象名) 或 {batchNo} (批次编号), {code} (标识), 比如 https://www.baidu.com/s?wd={productName} ")])],1),t("el-input",{directives:[{name:"show",rawName:"v-show",value:"kefuMobile"===i.linkType,expression:"box.linkType === 'kefuMobile'"}],attrs:{size:"small",placeholder:"请输入客服电话"},model:{value:i.kefuMobile,callback:function(t){e.$set(i,"kefuMobile",t)},expression:"box.kefuMobile"}}),t("el-upload",{directives:[{name:"show",rawName:"v-show",value:"qrCodeScan"===i.linkType,expression:"box.linkType === 'qrCodeScan'"}],staticClass:"avatar-uploader",attrs:{action:e.action,"show-file-list":!1,"on-success":e.uploadQrCodeScan(i),accept:".jpg,.jpeg,.png,.gif,.JPG,.JPEG,.PBG,.GIF"}},[i.qrCodeImage?t("img",{staticClass:"avatar",attrs:{src:i.qrCodeImage}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t("div",{directives:[{name:"show",rawName:"v-show",value:"weixinWeapp"===i.linkType,expression:"box.linkType === 'weixinWeapp'"}]},[t("el-input",{attrs:{size:"small",placeholder:"原始ID"},model:{value:i.weixinWeappUserName,callback:function(t){e.$set(i,"weixinWeappUserName",t)},expression:"box.weixinWeappUserName"}}),t("div",{staticStyle:{"font-size":"12px",color:"#C0C0C0","line-height":"20px"}},[e._v(" 进入微信小程序管理后台，在账号信息中查看小程序原始ID，如：gh_3eee678cd512 ")]),t("el-input",{attrs:{size:"small",placeholder:"小程序页面链接"},model:{value:i.weixinWeappPath,callback:function(t){e.$set(i,"weixinWeappPath",t)},expression:"box.weixinWeappPath"}}),t("div",{staticStyle:{"font-size":"12px",color:"#C0C0C0","line-height":"20px"}},[e._v(" 可在链接中使用参数 {productName} (对象名) 或 {batchNo} (批次编号), {code} (标识), 声明的页面路径必须添加.html后缀, 如 pages/{productName}/index.html ")])],1)],1)]),t("el-form-item",{attrs:{label:"文字颜色"}},[t("el-color-picker",{attrs:{size:"small"},model:{value:i.forecolor,callback:function(t){e.$set(i,"forecolor",t)},expression:"box.forecolor"}})],1),t("el-form-item",{attrs:{label:"图标选择"}},[t("el-switch",{attrs:{"inactive-color":"#13ce66","active-text":"图标","inactive-text":"图片"},on:{change:function(t){return e.changeIcon(t,a,i)}},model:{value:e.iconHistory[a].selectIcon,callback:function(t){e.$set(e.iconHistory[a],"selectIcon",t)},expression:"iconHistory[i].selectIcon"}}),t("e-icon-picker",{directives:[{name:"show",rawName:"v-show",value:e.iconHistory[a].selectIcon,expression:"iconHistory[i].selectIcon"}],staticClass:"styleboxItemSetting-iconPicker",attrs:{size:"small"},model:{value:i.fonticon,callback:function(t){e.$set(i,"fonticon",t)},expression:"box.fonticon"}}),e.iconHistory[a].selectIcon&&"weixinWeapp"===i.linkType?t("div",{staticStyle:{"font-size":"12px",color:"#C0C0C0","line-height":"20px"}},[e._v(" (微信小程序按钮暂不支持此类型图标展示) ")]):e._e(),t("el-upload",{directives:[{name:"show",rawName:"v-show",value:!e.iconHistory[a].selectIcon,expression:"!iconHistory[i].selectIcon"}],staticClass:"avatar-uploader",attrs:{action:e.action,"show-file-list":!1,"on-success":e.uploadImgIcon(i),accept:".jpg,.jpeg,.png,.gif,.bmp,.pdf,.JPG,.JPEG,.PBG,.GIF,.BMP,.PDF"}},[i.imgIcon?t("img",{staticClass:"avatar",attrs:{src:i.imgIcon}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t("el-form-item",{attrs:{label:"背景选择"}},[t("el-switch",{attrs:{"inactive-color":"#13ce66","active-text":"颜色","inactive-text":"图片"},on:{change:function(t){return e.changeBg(t,a,i)}},model:{value:e.bgHistory[a].selectColor,callback:function(t){e.$set(e.bgHistory[a],"selectColor",t)},expression:"bgHistory[i].selectColor"}})],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.bgHistory[a].selectColor,expression:"bgHistory[i].selectColor"}],attrs:{label:"背景颜色"}},[t("el-color-picker",{attrs:{size:"small"},model:{value:i.backcolor,callback:function(t){e.$set(i,"backcolor",t)},expression:"box.backcolor"}})],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.bgHistory[a].selectColor,expression:"!bgHistory[i].selectColor"}],attrs:{label:"背景图"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.action,"show-file-list":!1,"on-success":e.uploadImg(i),accept:".jpg,.jpeg,.png,.gif,.bmp,.pdf,.JPG,.JPEG,.PBG,.GIF,.BMP,.PDF"}},[i.backimage?t("img",{staticClass:"avatar",attrs:{src:i.backimage}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)}))],2)],1)},D=[],Q=(i("00e5"),{data:function(){var e=this;function t(t){return[{validator:function(i,a,s){var l=e.item.value.rows[0][t];l.title&&l.title.length>=6?(l.title=l.title.substring(0,6),s(new Error("标题长度不要超过6个字符"))):s()},trigger:"change"}]}return{bgColor:!0,action:"https://xi.cn88555.com/api/base/upload-file",item:{value:{rows:[[]]}},rules:{title0:t(0),title1:t(1),title2:t(2)},form:{},formStyle:1,linkTypes:[{value:"none",label:"无链接"},{value:"normal",label:"自定义"},{value:"weixinWeapp",label:"微信小程序"},{value:"suretyService",label:"售后"},{value:"warranty",label:"质保"},{value:"companyIntroduction",label:"公司介绍"},{value:"instruction",label:"使用说明"},{value:"qrCodeScan",label:"关注微信 (上传关注二维码)"},{value:"kefuMobile",label:"客服电话"},{value:"contactUs",label:"联系我们"},{value:"industrialMall",label:"工业商城"},{value:"officialQuery",label:"idis 官网查询"}],historyData:[],defaultStyles:[{title:"标题",href:"https://",fonticon:"menu",forecolor:"#FFFFFF",titleAlign:"center",backcolor:"#004da1",linkType:"normal"},{title:"标题",href:"https://",fonticon:"menu",forecolor:"#FFFFFF",titleAlign:"center",backcolor:"#004da1",linkType:"normal"},{title:"标题",href:"https://",fonticon:"menu",forecolor:"#FFFFFF",titleAlign:"center",backcolor:"#004da1",linkType:"normal"}],bgHistory:[],iconHistory:[]}},computed:{row:function(){return this.item.value.rows[0]}},watch:{formStyle:function(e){var t=this.getCellCount(e),i=this.row.length;if(i<t)for(var a=i;a<t;a++)this.row.push(Object.assign({},this.defaultStyles[a],this.historyData[a]));else if(i>t){for(var s=t;s<i;s++)this.historyData[s]=this.row[s];this.row.splice(t,i-t)}1===e?this.row[0].size=this.row[1].size=this.row[2].size=1:2===e?(this.row[0].size=1,this.row[1].size=2):3===e?(this.row[0].size=2,this.row[1].size=1):this.row[0].size=3}},methods:{changeItem:function(e){if(this.item!==e){this.historyData=[],this.item=e,this.formStyle=this.getFormStyle(this.row),this.bgHistory=[],this.iconHistory=[];for(var t=0;t<3;t++){var i=this.row[t]||this.defaultStyles[t];i.backcolor&&i.backimage&&(i.backcolor=null),this.$set(this.bgHistory,t,Object.assign({selectColor:!!i.backcolor,backimage:i.backimage,backcolor:i.backcolor})),this.$set(this.iconHistory,t,Object.assign({selectIcon:!!i.fonticon,fonticon:i.fonticon,imgIcon:i.imgIcon}))}}},getFormStyle:function(e){return 3==e.length?1:1===e.length?4:1==e[0].size?2:3},getCellCount:function(e){return 1===e?3:4===e?1:2},uploadImg:function(e){var t=this;return function(i){t.$set(e,"backimage",i.data)}},uploadImgIcon:function(e){var t=this;return function(i){t.$set(e,"imgIcon",i.data)}},uploadQrCodeScan:function(e){var t=this;return function(i){console.log("uploaded",i),t.$set(e,"qrCodeImage",i.data)}},onLinkChange:function(e,t){"normal"!==e&&(t.href=""),delete t.weixinWeappUserName,delete t.weixinWeappPath},changeBg:function(e,t,i){var a=this.bgHistory[t];e?(a.backimage=i.backimage,this.$set(i,"backcolor",a.backcolor),this.$set(i,"backimage",null)):(a.backcolor=i.backcolor,this.$set(i,"backcolor",null),this.$set(i,"backimage",a.backimage))},changeIcon:function(e,t,i){var a=this.iconHistory[t];e?(a.imgIcon=i.imgIcon,this.$set(i,"imgIcon",null),this.$set(i,"fonticon",a.fonticon)):(a.fonticon=i.fonticon,this.$set(i,"imgIcon",a.imgIcon),this.$set(i,"fonticon",null))}}}),K=Q,Z=(i("de3b"),i("a17f"),Object(h["a"])(K,E,D,!1,null,"fe05dd74",null)),X=Z.exports,Y=function(){var e=this,t=e._self._c;return t("el-form",{ref:"form",attrs:{model:e.textForm,rules:e.rules,"label-width":"80px"}},[t("el-form-item",{staticStyle:{"text-align":"left"},attrs:{label:"对齐方式"}},[t("el-radio-group",{on:{change:e.rChange},model:{value:e.textForm.radio,callback:function(t){e.$set(e.textForm,"radio",t)},expression:"textForm.radio"}},[t("el-radio",{attrs:{label:"1"},on:{click:function(t){return e.setTextValue("1")}}},[e._v("左")]),t("el-radio",{attrs:{label:"2"},on:{click:function(t){return e.setTextValue("2")}}},[e._v("中")]),t("el-radio",{attrs:{label:"3"},on:{click:function(t){return e.setTextValue("3")}}},[e._v("右")])],1)],1),t("el-form-item",{attrs:{label:"文本内容"}},[t("el-input",{attrs:{type:"textarea",prop:"text",autosize:{minRows:2,maxRows:4}},on:{input:function(t){return e.setTextValue()}},model:{value:e.textForm.text,callback:function(t){e.$set(e.textForm,"text",t)},expression:"textForm.text"}})],1)],1)},ee=[],te={data:function(){return{fileList:[],textForm:{text:"",radio:"",val:"1"},item:{},rules:{text:[{required:!0,message:"请填写内容",trigger:"blur"},{min:1,max:20,message:"长度在 3 到 5 个字符",trigger:"blur"}]}}},props:["sortList"],methods:{asyncTextInfo:function(e){this.textForm.text=e.value.text,"white-space: pre-wrap;line-height:1.5;text-align:left"===e.value.style?this.textForm.radio="1":"white-space: pre-wrap;line-height:1.5;text-align:center"===e.value.style?this.textForm.radio="2":"white-space: pre-wrap;line-height:1.5;text-align:right"===e.value.style&&(this.textForm.radio="3"),this.item=e},setTextValue:function(e){this.item.value.text=this.textForm.text,"1"===e?this.item.value.style="white-space: pre-wrap;line-height:1.5;text-align:left":"2"===e?this.item.value.style="white-space: pre-wrap;line-height:1.5;text-align:center":"3"===e&&(this.item.value.style="white-space: pre-wrap;line-height:1.5;text-align:right")},rChange:function(e){this.setTextValue(e)}}},ie=te,ae=Object(h["a"])(ie,Y,ee,!1,null,null,null),se=ae.exports,le=function(){var e=this,t=e._self._c;return t("el-form",{ref:"form",staticClass:"title-item-setting",attrs:{model:e.item.value,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"标题"}},[t("el-input",{attrs:{type:"text",placeholder:"请输入标题",size:"small",maxlength:"15","show-word-limit":"",rules:[{required:!0,message:"请输入标题",trigger:"blur"}]},model:{value:e.item.value.title,callback:function(t){e.$set(e.item.value,"title",t)},expression:"item.value.title"}})],1),t("el-form-item",{attrs:{label:"图标"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadUrl,"show-file-list":!0,"file-list":e.fileList,"before-upload":e.beforeAvatarUpload,"on-success":e.handleAvatarSuccess,"on-change":e.onChangeToolFile,"on-remove":e.handleRemove,accept:"image/jpeg, image/gif, image/png, image/jpg","list-type":"picture"}},[e.item.value.icon?t("img",{staticClass:"avatar",attrs:{src:e.item.value.icon}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t("el-form-item",{attrs:{label:"背景颜色"}},[t("el-color-picker",{model:{value:e.item.value.bgcolor,callback:function(t){e.$set(e.item.value,"bgcolor",t)},expression:"item.value.bgcolor"}})],1)],1)},oe=[],ne={data:function(){return{uploadUrl:"https://xi.cn88555.com/api/base/upload-file",item:{value:{}},fileList:[]}},methods:{asyncTitleInfo:function(e){this.item=e,this.fileList=[],""!=e.value.icon&&this.fileList.push({url:e.value.icon,name:""})},handleAvatarSuccess:function(e,t,i){this.item.value.icon=e.data},onChangeToolFile:function(e,t){console.log(this.fileList,t),t.length>0&&(this.fileList=[t[t.length-1].raw])},beforeAvatarUpload:function(e){var t=e.size/1024/1024<2;return t||(this.$message.error("上传头像图片大小不能超过 2MB!"),1==this.fileList.length&&(this.fileList=[])),t},handleRemove:function(){this.item.value.icon=""}}},re=ne,ce=(i("6a99"),Object(h["a"])(re,le,oe,!1,null,null,null)),ue=ce.exports,me=function(){var e=this,t=e._self._c;return t("el-form",{ref:"form",staticStyle:{"text-align":"left"},attrs:{model:e.item.value,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"高度"}},[t("el-select",{attrs:{size:"mini",placeholder:"200"},model:{value:e.item.value.height,callback:function(t){e.$set(e.item.value,"height",t)},expression:"item.value.height"}},e._l([200,220,250,280,300],(function(e){return t("el-option",{key:e,attrs:{label:e,value:e+"px"}})})),1)],1),t("el-form-item",{attrs:{label:"图片链接"}},[t("el-input",{attrs:{placeholder:"图片链接",size:"small"},on:{change:function(t){return e.setImgUrl()}},model:{value:e.imgUrl,callback:function(t){e.imgUrl=t},expression:"imgUrl"}}),t("div",{staticStyle:{"font-size":"12px",color:"#C0C0C0","line-height":"20px"}},[e._v(" 可在连接中使用参数 {productName} (对象名) 或 {batchNo} (批次编号), {code} (标识), 比如 https://www.baidu.com/s?wd={productName} ")])],1),t("el-form-item",{attrs:{label:"轮播图"}},[t("el-upload",{staticClass:"upload-carouse",attrs:{action:e.uploadUrl,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"on-success":e.handleSuccess,"on-exceed":e.handleExceed,"file-list":e.fileList,limit:4,accept:"image/jpeg,image/gif,image/png,image/jpg","list-type":"picture",multiple:!0}},[t("el-button",{attrs:{size:"mini",type:"primary"}},[e._v("点击上传")]),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t("el-alert",{staticStyle:{padding:"0 0 0 5px"},attrs:{title:"只能上传jpg/jpeg/png/gif格式文件, 最多4张。",type:"info","show-icon":"",closable:!1}}),t("el-alert",{staticStyle:{padding:"0 0 0 5px","margin-top":"5px"},attrs:{title:"为了达到最佳显示效果，请上传宽高比16：9的图片。",type:"info","show-icon":"",closable:!1}})],1)],1)],1)],1)},pe=[],fe={data:function(){return{uploadUrl:"https://xi.cn88555.com/api/base/upload-file",fileList:[],imgUrl:"",images:[],item:{value:{height:200,images:[],url:""}},disableUpload:!1}},methods:{asyncCarouselInfo:function(e){var t=this;this.item=e,this.fileList=[],this.images=[],this.imgUrl=this.item.value.url,e.value.images.forEach((function(e){t.fileList.push({url:e,name:""}),t.images.push(e)}))},handleRemove:function(e,t){if("undefined"===typeof e.response){var i=e.url,a=this.item.value.images.findIndex((function(e){return e===i}));a>-1&&(this.item.value.images.splice(a,1),this.images.splice(this.images.findIndex((function(e){return e.url===i})),1),this.fileList=t)}else{var s=e.response.data,l=this.item.value.images.findIndex((function(e){return e===s}));l>-1&&(this.item.value.images.splice(l,1),this.images.splice(this.images.findIndex((function(e){return e.url===s})),1),this.fileList=t)}},handlePreview:function(){},handleSuccess:function(e,t,i){console.log(e),!e||200!==e.code&&0!==e.code?this.$message.error("图片上传失败，请重试！"):(this.images.push(e.data),this.item.value.images.push(e.data),this.item.value.url=this.imgUrl)},handleExceed:function(){z["a"].$emit("showMessage",{message:"最多上传4张图片"})},setImgUrl:function(){this.item.value.url=this.imgUrl}}},he=fe,de=(i("5647"),Object(h["a"])(he,me,pe,!1,null,"4a581a19",null)),ge=de.exports,ve=function(){var e=this,t=e._self._c;return 0===e.sourceFlag?t("div",[t("el-form",{ref:"form",attrs:{model:e.item.value,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"对象溯源"}},[t("el-switch",{attrs:{"active-text":"显示","inactive-text":"隐藏"},model:{value:e.item.value.showTrace,callback:function(t){e.$set(e.item.value,"showTrace",t)},expression:"item.value.showTrace"}})],1)],1)],1):e._e()},be=[],xe={props:{item:Object,sourceFlag:String|Number}},we=xe,ye=Object(h["a"])(we,ve,be,!1,null,null,null),Ie=ye.exports,ke=function(){var e=this,t=e._self._c;return t("el-form",{ref:"form",staticStyle:{"text-align":"left"},attrs:{model:e.item.value,"label-width":"100px"}},[t("el-radio-group",{attrs:{size:"small"},model:{value:e.configArea,callback:function(t){e.configArea=t},expression:"configArea"}},[t("el-radio-button",{attrs:{label:"query"}},[e._v("防伪验证")]),t("el-radio-button",{attrs:{label:"success"}},[e._v("首次查询")]),t("el-radio-button",{attrs:{label:"failure"}},[e._v("多次查询")])],1),t("div",{staticStyle:{height:"20px"}}),t("div",{directives:[{name:"show",rawName:"v-show",value:"query"===e.configArea,expression:"configArea === 'query'"}]},[t("el-form-item",{attrs:{label:"按钮文字"}},[t("el-input",{attrs:{size:"small",placeholder:"马上验证"},model:{value:e.item.value.buttonText,callback:function(t){e.$set(e.item.value,"buttonText",t)},expression:"item.value.buttonText"}})],1),t("el-form-item",{attrs:{label:"按钮颜色"}},[t("el-color-picker",{attrs:{size:"small"},model:{value:e.item.value.buttonColor,callback:function(t){e.$set(e.item.value,"buttonColor",t)},expression:"item.value.buttonColor"}})],1)],1),t("div",{directives:[{name:"show",rawName:"v-show",value:"success"===e.configArea,expression:"configArea === 'success'"}]},[t("el-form-item",{attrs:{label:"查验结果"}},[t("el-input",{attrs:{size:"small",placeholder:"输入查验结果"},model:{value:e.item.value.validTitle,callback:function(t){e.$set(e.item.value,"validTitle",t)},expression:"item.value.validTitle"}})],1),t("el-form-item",{attrs:{label:"防伪模板"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",size:"small"},model:{value:e.item.value.successTemplate,callback:function(t){e.$set(e.item.value,"successTemplate",t)},expression:"item.value.successTemplate"}},e._l(e.successTemplateList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:"防伪文字"}},[t("div",{staticStyle:{"white-space":"pre-wrap"}},[e._v(e._s(e.successTemplate))])]),t("el-form-item",{attrs:{label:"语音播报"}},[t("el-switch",{model:{value:e.item.value.validVoice,callback:function(t){e.$set(e.item.value,"validVoice",t)},expression:"item.value.validVoice"}})],1)],1),t("div",{directives:[{name:"show",rawName:"v-show",value:"failure"===e.configArea,expression:"configArea === 'failure'"}]},[t("el-form-item",{attrs:{label:"查验结果"}},[t("el-input",{attrs:{size:"small",placeholder:"输入查验结果"},model:{value:e.item.value.invalidTitle,callback:function(t){e.$set(e.item.value,"invalidTitle",t)},expression:"item.value.invalidTitle"}})],1),t("el-form-item",{attrs:{label:"防伪模板"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",size:"small"},model:{value:e.item.value.failureTemplate,callback:function(t){e.$set(e.item.value,"failureTemplate",t)},expression:"item.value.failureTemplate"}},e._l(e.failureTemplateList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:"防伪文字"}},[t("div",{staticStyle:{"white-space":"pre-wrap"}},[e._v(e._s(e.failureTemplate))])]),t("el-form-item",{attrs:{label:"查询记录"}},[t("el-switch",{model:{value:e.item.value.queryHistory,callback:function(t){e.$set(e.item.value,"queryHistory",t)},expression:"item.value.queryHistory"}})],1)],1)],1)},Ce=[],Se=(i("96c5"),i("fa30")),Fe={props:{item:Object},computed:{successTemplate:function(){var e=this;if(!this.item.value.successTemplate)return"";var t=this.successTemplateList.filter((function(t){return t.id===e.item.value.successTemplate}));return(t[0]||{}).text},failureTemplate:function(){var e=this;if(!this.item.value.failureTemplate)return"";var t=this.failureTemplateList.filter((function(t){return t.id===e.item.value.failureTemplate}));return(t[0]||{}).text}},data:function(){return{configArea:"query",successTemplateList:[],failureTemplateList:[]}},watch:{configArea:function(){this.item.value.configArea=this.configArea}},mounted:function(){return Object(o["a"])(Object(l["a"])().mark((function e(){return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}},_e=Fe,$e=Object(h["a"])(_e,ke,Ce,!1,null,null,null),Te=$e.exports,Ae=function(){var e=this,t=e._self._c;return t("el-form",{ref:"form",staticClass:"title-item-setting",attrs:{model:e.item.value,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"音频"}},[t("el-upload",{attrs:{action:e.uploadUrl,"show-file-list":!0,"file-list":e.fileList,"on-change":e.handleChange,"before-upload":e.beforeAvatarUpload,"on-success":e.handleAvatarSuccess,"on-remove":e.handleRemove,accept:"audio/mp3, audio/ogg, audio/wav, audio/ape","list-type":"audio"}},[t("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e.item.value.music?t("audio",{attrs:{src:e.item.value.music}}):e._e(),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t("el-alert",{staticStyle:{padding:"0 0 0 5px"},attrs:{title:"只能上传1个mp3/ogg/wav/ape文件，且不超过10MB",type:"info","show-icon":"",closable:!1}})],1)],1)],1),t("el-form-item",{attrs:{label:"背景颜色"}},[t("el-color-picker",{model:{value:e.item.value.bgcolor,callback:function(t){e.$set(e.item.value,"bgcolor",t)},expression:"item.value.bgcolor"}})],1)],1)},je=[],Ne={data:function(){return{uploadUrl:"https://xi.cn88555.com/api/base/upload-file",item:{value:{}},fileList:[]}},methods:{asyncMusicInfo:function(e){if(this.item=e,this.fileList=[],""!=e.value.music){var t=e.value.music,i=t.lastIndexOf("/");this.fileList.push({url:t,name:t.substr(i+1,t.length)})}},handleAvatarSuccess:function(e){this.item.value.music=e.data},handleChange:function(e,t){t.length>0&&(this.fileList=[t[t.length-1]])},handleRemove:function(){this.item.value.music=""},beforeAvatarUpload:function(e){var t=e.size/1024/1024<10;return t||(this.fileList=[],this.$message.error("上传音频大小不能超过 10MB!")),t}}},Oe=Ne,ze=(i("2942"),i("41ca"),Object(h["a"])(Oe,Ae,je,!1,null,"2f7b007c",null)),Le=ze.exports,Ue=["relatedProduct","productIntroduction","productBarcode","productQualityGuaranteePeriod","productPrice","codeInformation","productImages"],He={data:function(){var e={value:{},visible:!0,id:-1,imgList:[i("cbcd"),i("cbcd")]};return{activeName:"first",compFlg:"",defaultItem:e,item:e}},props:{sortList:Array,sourceFlag:String|Number},mounted:function(){console.log(this.sourceFlag)},watch:{sourceFlag:function(e){this.item.value.sourceFlag=e,console.log(this.item)}},components:{DefaultItemSetting:j,ImageItemSetting:M,VideoItemSetting:W,StyleboxItemSetting:X,TextItemSetting:se,TitleItemSetting:ue,CarouselItemSetting:ge,ProductInfoSetting:Ie,ValidateSetting:Te,MusicItemSetting:Le},methods:{switchingAttConf:function(e){this.compFlg=e.type&&Ue.indexOf(e.type)<0?e.type:"","text"==e.type?this.$refs.textSetting.asyncTextInfo(e):"templateHead"===e.type?this.$refs.titleSetting.asyncTitleInfo(e):"backMusic"===e.type?this.$refs.musicSetting.asyncMusicInfo(e):"pictures"===e.type?this.$refs.imageSetting.asyncImageInfo(e):"stylebox"===e.type?this.$refs.styleboxSetting.changeItem(e):"video"===e.type?this.$refs.videoSetting.asyncVideoInfo(e):"carousel"===e.type&&this.$refs.carouselSetting.asyncCarouselInfo(e),this.item=e},removeItem:function(e){console.log("remove item;,",e),this.item===e&&(this.item=this.defaultItem,this.compFlg="")}}},Me=He,Pe=(i("1642"),i("bb45"),Object(h["a"])(Me,C,S,!1,null,"65cacecb",null)),Ve=Pe.exports,Be=function(){var e=this,t=e._self._c;return t("el-select",{attrs:{value:e.value,size:e.size,placeholder:e.placeholder,multiple:e.multiple,disabled:e.disabled,clearable:e.clearable,filterable:"",remote:"","remote-method":e.remoteMethod,loading:e.loading},on:{change:e.onChange}},e._l(e.options,(function(i){return t("el-option",{key:e.getValue(i),attrs:{label:e.getLabel(i),value:e.getValue(i)}})})),1)},qe=[],Ge={props:{value:[Number,String],size:{type:String,required:!1},placeholder:{type:String,required:!1},multiple:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1}},model:{prop:"value",event:"change"},data:function(){return{options:[]}},watch:{value:{handler:function(e){this.currValue=e},immediate:!0}},methods:{onChange:function(e){for(var t=0;t<this.options.length;t++)this.options[t].id===e&&this.$emit("getFlag",this.options[t].sourceFlag);this.currValue=e,this.$emit("change",e)},getValue:function(e){return e.id},getSelectedObject:function(){var e=this,t=this.options.filter((function(t){return e.getValue(t)===e.currValue}));return 0===t.length?null:t[0]}}},Je=Ge,Re=Object(h["a"])(Je,Be,qe,!1,null,null,null),We=Re.exports,Ee=i("f229"),De={data:function(){return{loading:!1,currValue:null}},mixins:[We],methods:{getLabel:function(e){return e.name},remoteMethod:function(e){var t=this;if(""!==e){this.loading=!0;var i="/businessObject/pageQuery";Object(Ee["b"])(i,{name:e}).then((function(e){200==e.code?(t.loading=!1,t.options=e.rows):(z["a"].$emit("showMessage",{type:"error",message:e.msg}),2001==e.code&&setTimeout((function(){parent.window.location.href="/#/login"}),1e3))}))}else this.options=[]}},watch:{value:{handler:function(e){var t=this;if(null!=e){var i="/businessObject/pageQuery";Object(Ee["b"])(i,{id:e}).then((function(e){200==e.code?t.options=e.rows:(z["a"].$emit("showMessage",{type:"error",message:e.msg}),2001==e.code&&setTimeout((function(){parent.window.location.href="/#/login"}),1e3))}))}this.currValue=e},immediate:!0}}},Qe=-1,Ke={data:function(){for(var e={name:"",config:{getLocation:!1,getWeixinUserInfo:!1},items:[],productId:null},t=0,a=Object.keys(m["a"]);t<a.length;t++){var s=a[t],l=m["a"][s];(l.fixedSort||l.must)&&e.items.push(this.newItem(s))}return e.items.sort((function(e,t){return(m["a"][e.type].fixedSort||100)-(m["a"][t.type].fixedSort||100)})),{template:e,backImg:i("ae5c"),sourceFlag:null}},computed:{isCreate:function(){return!!this.template.id}},methods:{selectItem:function(e){var t=e.item;this.$refs.homeMsg.selectItem(t.id),this.$refs.homeConfig.switchingAttConf(t)},selectItem2:function(e){var t=e.item;this.$refs.homeConfig.switchingAttConf(t)},handleProductChange:function(e){this.sourceFlag=e},changeSourceFlag:function(e){this.sourceFlag=e},updateItem:function(e){if(e.flag){var t=this.newItem(e.item.type);this.template.items.push(t);var i=this;r["default"].nextTick((function(){i.$refs.homeSort.hightItem(t),i.selectItem({item:t,i:i.template.items.length-1})}))}else this.template.items.splice(this.template.items.findIndex((function(t){return t.type===e.item.type})),1)},removeItem:function(e){var t=this.template.items.findIndex((function(t){return t.id===e.id})),i=this.template.items[t];this.$refs.homeConfig.removeItem(i),this.template.items.splice(t,1),this.$refs.homeSetting.asyncItemInfo(e)},newItem:function(e){return{id:Qe--,type:e,visible:!0,sort:0,value:JSON.parse(JSON.stringify(m["a"][e].defaultValue||{}))}},submitForm:function(e,t){this.submitValid(e,t)},submitValid:function(e,t){var i=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;var a=Object.assign({},i.template);a.items=[];var s,l=10,o=Object(n["a"])(i.template.items);try{for(o.s();!(s=o.n()).done;){var r=s.value;console.log(JSON.parse(JSON.stringify(r)));var c=m["a"][r.type].validate;if(c){var u=c(r);if(u)return i.$message.error("".concat(m["a"][r.type].title," : ").concat(u)),void i.selectItem({item:r,i:i.template.items.indexOf(r)})}r=Object.assign({},r),r.sort=l+=10,r.id=r.id<0?null:r.id,a.items.push(r)}}catch(p){o.e(p)}finally{o.f()}a.submitReview=t,a.boId=a.productId,delete a.productId,console.log(a),Object(Ee["b"])("/businessObjectTemplate/".concat(i.template.id?"editTemplate":"add"),a).then((function(e){200==e.code?(z["a"].$emit("showMessage",{type:"success",message:"添加成功"}),setTimeout((function(){parent.window.history.back()}),500)):(z["a"].$emit("showMessage",{type:"error",message:e.msg}),2001==e.code&&setTimeout((function(){parent.window.location.href="/#/login"}),1e3))})).catch((function(e){return Object(Se["a"])(e)}))}))}},components:{HomeSetting:g,HomeSort:I,HomeMsg:k["a"],HomeConfig:Ve,ProductSelect:De},beforeRouteEnter:function(e,t,i){return Object(o["a"])(Object(l["a"])().mark((function t(){var a,s,o,r,c,u,p,f,h,d;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=e.query.id,!s){t.next=13;break}return t.next=4,Object(Se["b"])("/businessObjectTemplate/detail?id=".concat(s));case 4:a=t.sent,a.config&&"string"===typeof a.config&&(a.config=JSON.parse(a.config)),a.productId=a.boId,o=[],r=Object(n["a"])(a.items);try{for(r.s();!(c=r.n()).done;)if(u=c.value,u){if("string"===typeof u.value&&(u.value=JSON.parse(u.value)),p=m["a"][u.type].defaultValue,!(p instanceof Array))for(f=0,h=Object.keys(p);f<h.length;f++)d=h[f],void 0===u.value[d]&&(u.value[d]=p[d]);o.push(u)}}catch(l){r.e(l)}finally{r.f()}a.items=o,console.log(e.query.copy),e.query.copy&&(a.id=null,a.name=a.name+" (副本)");case 13:i((function(e){a&&(e.$data.template=a,e.$refs.homeSetting.syncSettingInfo({items:a.items}))}));case 14:case"end":return t.stop()}}),t)})))()}},Ze=Ke,Xe=(i("3379"),Object(h["a"])(Ze,a,s,!1,null,"f49bcb44",null));t["default"]=Xe.exports},"542f":function(e,t,i){},5647:function(e,t,i){"use strict";i("628d")},"628d":function(e,t,i){},"6a99":function(e,t,i){"use strict";i("fed8")},"6f80":function(e,t,i){},7721:function(e,t,i){},a17f:function(e,t,i){"use strict";i("7721")},a85e:function(e,t,i){},ae5c:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAQCAYAAAAS7Y8mAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAADISURBVDiNrdO9DcMgEAXgx9FQUCHbHRNkgmSQLJId7UHsisKFJXSdL02IkGwUBfMqfqRPcBxAIcMwPLque5X2f4VK6L7vdwBwzvkmcI4S0bSu63wZds75HA0hjDUoAKgcJaJnC/QLt0aBTym01k2un0f1ff8UkaqXL4WIptN2axEFAOkjtCyFBgBjzKKUuomIt9aqGGNV7x5gZt5a4zoNWuM6nzDzZq1VIuKv4oeuCCGMRDQBQPreNdFnizHGOZ3cGLMw8/Yv/AbWJ276+23WZQAAAABJRU5ErkJggg=="},ba2d:function(e,t,i){},bb45:function(e,t,i){"use strict";i("0e38")},cbcd:function(e,t,i){e.exports=i.p+"img/1.f535d5e6.jpeg"},ce16:function(e,t,i){},dae8:function(e,t,i){"use strict";i("542f")},de3b:function(e,t,i){"use strict";i("f1c9")},e03c:function(e,t,i){},f1c9:function(e,t,i){},fed8:function(e,t,i){},ff07:function(e,t,i){e.exports=i.p+"img/template-video-pic.c36161fb.jpg"}}]);
//# sourceMappingURL=chunk-4a03af2e.d21c37ba.js.map